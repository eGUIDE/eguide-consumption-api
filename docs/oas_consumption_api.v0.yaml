openapi: 3.0.0
info:
  version: 0.0.2
  title: Consumption Prediction API
  description: 'The Consumption Prediction API enables users to access critical consumption prediction data to be used for purposes such system planning for electricity infrastructure. The API is organized based on the REST architecture  and returns responses in JSON /xml format. '
  termsOfService: 'https://eguide.io/#terms-of-use/'
  contact:
    name: e-GUIDE Initiative
    url: 'https://eguide.io/#contact'
    email: info@eguide.io
  license:
    name: Consumption Prediction License
    url: 'https://eguide.io/#license'
servers:
  - url: 'https://api.eguide.io/v0'
    description: eGUIDE Energy API (Beta)
paths:
  /prediction:
    get:
      tags:
        - Consumption Predictions
      description: Obtain consumption predictions for the specified point or polygon
      operationId: get-household-prediction
      parameters:
        - name: aoi
          in: query
          description: AOI String -- use POLYGON or POINT
          required: true
          schema:
            type: string
            items:
              type: number
          examples:
            point_1:
              value: POINT(35.8843 4.0665)
            point_2:
              value: '35.8843, 4.0665'
            polygon_1:
              value: 'POLYGON(35.8800 4.0600, 35.8900 4.0665, 35.8800 4.0600)'
        - name: resolution
          description: 'resolution: 250 or 1000'
          schema:
            type: integer
          in: query
          examples:
            resolution_1:
              value: 250
        - name: summary
          description: 'Allowed values: {true, false}'
          schema:
            type: boolean
          in: query
          examples:
            detail_1:
              value: summary
      responses:
        '200':
          description: 'successful '
          content:
            application/json:
              schema:
                type: object
              examples:
                example-1:
                  value:
                    data:
                      number_of_cells: 26
                      resolution: null
                      summary_only: true
                    data_summary:
                      classA_pooled_prob_mean: 0.67
                      classA_pooled_prob_std_dev: 0.08
                      classA_total_count: 136
                      classB_pooled_prob_mean: 0.66
                      classB_pooled_prob_std_dev: 0.07
                      classB_total_count: 179
                    model_metadata:
                      description: "Model output generated for project Eguide, \nIncludes whole of Kenya\nSamples only, not intended for production\n"
                      model_output_id: 1
                      model_run_date: '2020-05-30'
                      model_version: 0.1.1
                    request:
                      AOI_coords: "'POLYGON((37.58436928328017 2.505196287490957, 37.58349266701641 2.50483389635894, 37.58243468187049 2.50015300189687, 37.58031871157866 2.498703431192026, 37.57693315911171 2.496680069407397, 37.57463581993773 2.496498872677634, 37.57309418443938 2.49773704983297, 37.57106889858863 2.499367817963794, 37.56961794753137 2.503112537112806, 37.56992022900163 2.50679684712427, 37.57221756817562 2.509212782485751, 37.57448467920259 2.511477717832856, 37.5765704213474 2.51165891249102, 37.57856547905113 2.510813337204571, 37.58149760931268 2.510179155380619, 37.58385540478073 2.508518201526364, 37.58436928328017 2.505196287490957))'"
                      AOI_type: polygon
                      requested_resolution: null
          headers: {}
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    Code: BadRequestError
                    Message: 'BadRequestError: Shape Coordinates missing'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    message: Forbidden
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                example-1:
                  value:
                    Code: NotFoundError
                    Message: "NotFoundError: No structures found for query aoi 'POINT(35.0 4.0665)'"
        '500':
          description: Internal Server Error
components:
  schemas: {}
  securitySchemes:
    x-api-key:
      name: "User's API Key"
      type: apiKey
      in: header
tags:
  - name: Consumption Predictions
    description: Get household consumption prediction details
security:
  - apikey: []
